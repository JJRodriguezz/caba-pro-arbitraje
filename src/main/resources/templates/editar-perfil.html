<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <title>Editar Perfil - CABA Pro</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="stylesheet" th:href="@{/css/perfil.css}" />
    <link rel="stylesheet" th:href="@{/css/formularios.css}" />
</head>
<body style="margin: 0; padding: 0; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">

<div class="perfil-container">
    <!-- Header del formulario -->
    <div class="perfil-header">
        <h1>‚úèÔ∏è Editar Perfil</h1>
        <p th:if="${esAdmin}" class="text-muted">Administrador del Sistema</p>
        <p th:if="${!esAdmin}" class="text-muted">√Årbitro Profesional</p>
    </div>

    <!-- Mostrar errores -->
    <div th:if="${error}" class="alert alert-error">
        <span th:text="${error}"></span>
    </div>

    <!-- Formulario de edici√≥n -->
    <form th:action="${esAdmin ? '/admin/perfil/editar' : '/arbitro/perfil/editar'}" 
          th:object="${editarPerfil}" 
          method="post">

        <!-- Informaci√≥n para Administrador -->
        <div th:if="${esAdmin}" class="info-section">
            <div class="info-title">
                <span>üîß</span> Informaci√≥n del Administrador
            </div>
            
            <div class="form-group">
                <label for="username">Nombre de Usuario:</label>
                <input type="text" 
                       id="username" 
                       th:field="*{username}" 
                       class="form-control"
                       placeholder="Ingrese el nombre de usuario" />
                <span th:if="${#fields.hasErrors('username')}" 
                      th:errors="*{username}" 
                      class="error-message"></span>
            </div>
        </div>

        <!-- Informaci√≥n para √Årbitro -->
        <div th:if="${!esAdmin}" class="perfil-info">
            <!-- Informaci√≥n Personal -->
            <div class="info-section">
                <div class="info-title">
                    <span>üë§</span> Informaci√≥n Personal
                </div>
                
                <div class="form-group">
                    <label for="nombre">Nombre:</label>
                    <input type="text" 
                           id="nombre" 
                           th:field="*{nombre}" 
                           class="form-control"
                           placeholder="Ingrese su nombre" />
                    <span th:if="${#fields.hasErrors('nombre')}" 
                          th:errors="*{nombre}" 
                          class="error-message"></span>
                </div>

                <div class="form-group">
                    <label for="apellidos">Apellidos:</label>
                    <input type="text" 
                           id="apellidos" 
                           th:field="*{apellidos}" 
                           class="form-control"
                           placeholder="Ingrese sus apellidos" />
                    <span th:if="${#fields.hasErrors('apellidos')}" 
                          th:errors="*{apellidos}" 
                          class="error-message"></span>
                </div>

                <div class="form-group">
                    <label for="numeroIdentificacion">N√∫mero de Identificaci√≥n:</label>
                    <input type="text" 
                           id="numeroIdentificacion" 
                           th:field="*{numeroIdentificacion}" 
                           class="form-control"
                           placeholder="Ingrese su n√∫mero de identificaci√≥n" />
                </div>

                <div class="form-group">
                    <label for="fechaNacimiento">Fecha de Nacimiento:</label>
                    <input type="date" 
                           id="fechaNacimiento" 
                           th:field="*{fechaNacimiento}" 
                           class="form-control" />
                </div>
            </div>

            <!-- Informaci√≥n de Contacto -->
            <div class="info-section">
                <div class="info-title">
                    <span>üìß</span> Contacto
                </div>
                
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" 
                           id="email" 
                           th:field="*{email}" 
                           class="form-control"
                           placeholder="Ingrese su email" />
                    <span th:if="${#fields.hasErrors('email')}" 
                          th:errors="*{email}" 
                          class="error-message"></span>
                </div>

                <div class="form-group">
                    <label for="telefono">Tel√©fono:</label>
                    <input type="tel" 
                           id="telefono" 
                           th:field="*{telefono}" 
                           class="form-control"
                           placeholder="Ingrese su tel√©fono" />
                </div>
            </div>

            <!-- Informaci√≥n Profesional -->
            <div class="info-section">
                <div class="info-title">
                    <span>‚öΩ</span> Informaci√≥n Profesional
                </div>
                
                <div class="form-group">
                    <label for="especialidad">Especialidad:</label>
                    <select id="especialidad" 
                            th:field="*{especialidad}" 
                            class="form-control">
                        <option value="">Seleccione una especialidad</option>
                        <option th:each="esp : ${especialidades}" 
                                th:value="${esp}" 
                                th:text="${esp.descripcion}"></option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="escalafon">Escalaf√≥n:</label>
                    <input type="text" 
                           id="escalafon" 
                           th:field="*{escalafon}" 
                           class="form-control"
                           placeholder="Ingrese su escalaf√≥n" />
                </div>
            </div>
        </div>

        <!-- Estado com√∫n -->
        <div class="info-section">
            <div class="info-title">
                <span>‚öôÔ∏è</span> Estado
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" 
                           th:field="*{activo}" 
                           class="form-checkbox" />
                    <span class="checkmark"></span>
                    Usuario Activo
                </label>
                <small class="help-text">Desmarque para establecer como "Ausente"</small>
            </div>
        </div>

        <!-- Botones de acci√≥n -->
        <div class="actions-section">
            <a th:href="${esAdmin ? '/admin/perfil' : '/arbitro/perfil'}" 
               class="btn btn-secondary">‚ùå Cancelar</a>
            <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
        </div>
    </form>
</div>

</body>
</html>
