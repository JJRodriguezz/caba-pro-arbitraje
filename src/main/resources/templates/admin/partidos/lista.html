<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Partidos - CABA Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/partidos.css}" />
</head>
<body>
<div class="container">
  <!-- Navigation -->
  <div class="nav-bar">
    <div class="nav-links">
      <a th:href="@{/admin/dashboard}">Dashboard</a>
      <a th:href="@{/admin/arbitros}">√Årbitros</a>
      <a href="#" class="active">Partidos</a>
      <a th:href="@{/admin/torneos}">Torneos</a>
      <a th:href="@{/admin/calendario}">Calendario</a>
      <a th:href="@{/admin/notificaciones}" title="Notificaciones" class="notificaciones-btn">üîî</a>
    </div>
    <div class="user-info">
      <a th:href="@{/admin/perfil}" class="profile-link">
        <span th:text="${#authentication.name}">Administrador</span>
      </a>
      <form th:action="@{/logout}" method="post" style="display:inline;">
        <button type="submit" class="logout-btn">Salir</button>
      </form>
    </div>
  </div>

  <!-- Messages -->
  <div th:if="${success}" class="message success" th:text="${success}"></div>
  <div th:if="${error}" class="message error" th:text="${error}"></div>

  <!-- Header -->
  <div class="header">
    <h1>Gesti√≥n de Partidos</h1>
    <div class="action-buttons">
      <a href="#" class="btn btn-secondary">Exportar Excel</a>
      <a th:href="@{/admin/partidos/nuevo}" class="btn btn-primary">Crear Partido</a>
    </div>
  </div>

  <!-- Table -->
  <div th:if="${not #lists.isEmpty(partidos)}">
    <table>
      <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Fecha y hora</th>
        <th>Sede</th>
        <th>Local</th>
        <th>Visitante</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="p : ${partidos}">
        <td th:text="${p.id}">1</td>
        <td th:text="${p.nombre}">Liga Municipal</td>
        <td th:text="${#temporals.format(p.fechaHora,'dd/MM/yyyy HH:mm')}">01/01/2026 19:00</td>
        <td th:text="${p.sede}">Coliseo</td>
        <td th:text="${p.equipoLocal}">Local</td>
        <td th:text="${p.equipoVisitante}">Visitante</td>
        <td>
          <span class="status-badge"
                th:class="'status-badge status-' + ${#strings.toLowerCase(p.estado)}"
                th:text="${p.estado}">PROGRAMADO</span>
        </td>
        <td>
            <div class="action-links">
                <!-- Asignar √Årbitro a partido -->
                <a th:href="@{'/admin/partidos/' + ${p.id} + '#asignar'}" class="assign-btn">Asignar √Årbitro</a>
                <!-- Editar partido -->
                <a th:href="@{'/admin/partidos/' + ${p.id} + '/editar'}" class="edit-btn">Editar</a>
                <!-- Eliminar partido -->
                <form th:action="@{'/admin/partidos/' + ${p.id} + '/eliminar'}"
                    method="post"
                    onsubmit="return confirm('¬øSeguro que quieres eliminar este partido?');">
                <button type="submit" class="delete-btn">Eliminar</button>
                </form>
            </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  <div th:if="${#lists.isEmpty(partidos)}" class="empty-state">
    <h3>No hay partidos creados</h3>
    <p>Crea el primer partido para comenzar a asignar √°rbitros.</p>
    <a th:href="@{/admin/partidos/nuevo}" class="btn btn-primary">Crear Primer Partido</a>
  </div>
</div>
</body>
</html>