<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>[[#{partidos.titulo}]] - CABA Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/partidos.css}" />
</head>
<body>
<div class="container">
  <!-- Navigation -->
  <div class="nav-bar">
    <div class="nav-links">
      <a th:href="@{/admin/dashboard}" th:text="#{nav.dashboard}">Dashboard</a>
      <a th:href="@{/admin/arbitros}" th:text="#{nav.arbitros}">√Årbitros</a>
      <a href="#" class="active" th:text="#{nav.partidos}">Partidos</a>
      <a th:href="@{/admin/torneos}" th:text="#{nav.torneos}">Torneos</a>
      <a th:href="@{/admin/calendario}" th:text="#{nav.calendario}">Calendario</a>
      <a th:href="@{/admin/notificaciones}" th:title="#{nav.notificaciones}" class="notificaciones-btn">üîî</a>
    </div>
    <div class="user-info">
      <a th:href="@{/admin/perfil}" class="profile-link">
        <span th:text="${#authentication.name}">Administrador</span>
      </a>
      <form th:action="@{/logout}" method="post" style="display:inline;">
        <button type="submit" class="logout-btn" th:text="#{btn.salir}">Salir</button>
      </form>
    </div>
  </div>

  <!-- Messages -->
  <div th:if="${success}" class="message success" th:text="${success}"></div>
  <div th:if="${error}" class="message error" th:text="${error}"></div>

  <!-- Header -->
  <div class="header">
    <h1 th:text="#{partidos.gestion}">Gesti√≥n de Partidos</h1>
    <div class="action-buttons">
      <a th:href="@{/admin/export/partidos}" class="btn btn-secondary" th:text="#{partidos.exportar}">Exportar Excel</a>
      <a th:href="@{/admin/partidos/nuevo}" class="btn btn-primary" th:text="#{partidos.crear}">Crear Partido</a>
    </div>
  </div>

  <!-- Table -->
  <div th:if="${not #lists.isEmpty(partidos)}">
    <table>
      <thead>
      <tr>
        <th th:text="#{partidos.tabla.id}">ID</th>
        <th th:text="#{partidos.tabla.nombre}">Nombre</th>
        <th th:text="#{partidos.tabla.fecha}">Fecha y hora</th>
        <th th:text="#{partidos.tabla.sede}">Sede</th>
        <th th:text="#{partidos.tabla.local}">Local</th>
        <th th:text="#{partidos.tabla.visitante}">Visitante</th>
        <th th:text="#{partidos.tabla.estado}">Estado</th>
        <th th:text="#{partidos.tabla.acciones}">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="p : ${partidos}">
        <td th:text="${p.id}">1</td>
        <td th:text="${p.nombre}">Liga Municipal</td>
        <td th:text="${#temporals.format(p.fechaHora,'dd/MM/yyyy HH:mm')}">01/01/2026 19:00</td>
        <td th:text="${p.sede}">Coliseo</td>
        <td th:text="${p.equipoLocal}">Local</td>
        <td th:text="${p.equipoVisitante}">Visitante</td>
        <td>
          <span class="status-badge"
                th:class="'status-badge status-' + ${#strings.toLowerCase(p.estado)}"
                th:text="${p.estado}">PROGRAMADO</span>
        </td>
        <td>
            <div class="action-links">
                <!-- Asignar √Årbitro a partido -->
                <a th:href="@{'/admin/partidos/' + ${p.id} + '#asignar'}" class="assign-btn" th:text="#{partidos.asignar}">Asignar √Årbitro</a>
                <!-- Editar partido -->
                <a th:href="@{'/admin/partidos/' + ${p.id} + '/editar'}" class="edit-btn" th:text="#{partidos.editar}">Editar</a>
                <!-- Eliminar partido -->
                <form th:action="@{'/admin/partidos/' + ${p.id} + '/eliminar'}"
                    method="post"
                    th:onsubmit="'return confirm(\'' + #{partidos.eliminar.confirmar} + '\');'">
                <button type="submit" class="delete-btn" th:text="#{partidos.eliminar}">Eliminar</button>
                </form>
            </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  <div th:if="${#lists.isEmpty(partidos)}" class="empty-state">
    <h3 th:text="#{partidos.vacio.titulo}">No hay partidos creados</h3>
    <p th:text="#{partidos.vacio.mensaje}">Crea el primer partido para comenzar a asignar √°rbitros.</p>
    <a th:href="@{/admin/partidos/nuevo}" class="btn btn-primary" th:text="#{partidos.vacio.btn}">Crear Primer Partido</a>
  </div>
</div>
</body>
</html>